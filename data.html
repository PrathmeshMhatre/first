<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <!-- Meta, title, CSS, favicons, etc. -->
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>LTI Digital Discovery </title>

  <!-- Bootstrap core CSS -->
<script type="text/javascript" src="js/d3.min.js"></script>
<script type="text/javascript" src="js/underscore.js"></script>

  <link href="css/bootstrap.min.css" rel="stylesheet">

  <link href="fonts/css/font-awesome.min.css" rel="stylesheet">
  <link href="css/animate.min.css" rel="stylesheet">
  
  <!-- ion_range -->
  <link rel="stylesheet" href="css/normalize.css" />
  <link rel="stylesheet" href="css/ion.rangeSlider.css" />
  <link rel="stylesheet" href="css/ion.rangeSlider.skinFlat.css" />


  <!-- Custom styling plus plugins -->
  <link href="css/custom.css" rel="stylesheet">
  <link href="css/icheck/flat/green.css" rel="stylesheet">
  
  <style>
  
  .bg-grey{
	background-color:#eee;
	border-radius:6px;
	padding-left:10px;
	padding-right:10px;
	padding-bottom:10px;
	padding-top:5px;
	height:60px;
  }
  
  .text-box{
	text-align:center;
	font-size:24px;
	margin-top:-10px;
	
  }
  
  .sum-box{
	text-align:center;
  }
  
    .lob-head{
	text-align:center;
	font-size:36px;
	
	margin-top:10px;
	padding-bottom:10px;
	
  }
  
     .vc-head{
	text-align:center;
	font-size:24px;
	margin-top:10px;
	padding-bottom:10px;
	
  }
  
  .vc-head a{
	color:#4fb5d3;
  }
  
  .x_title{
	/*border-bottom:none;*/
	border-bottom: 2px solid #E6E9ED;
  }
  
  .right_col{
	background-image: url(images/digital.jpg);
  }
  
 .vc-bg{
	    background-color: #607D8B;
		color: white;
		 display: flex;
		padding: 5px 5px 5px 5px;
		border-radius: 6px;
		font-size:16px;
		margin-top:5px;
		
 }
  
   .vc-bg p{
	margin: 0px 0px 0px 0px;
   }
  
	.kpi-text{
	margin-top:10px;
	}

  .ind-btn{
	width:80%;
	padding:10px;
  }
  
  .trans-panel{
      position: sticky;
    /* margin-bottom: 10px; */
    /* margin-top: -40px; */
    padding: 5px 17px;
    display: flex;
    /* background: #fff; */
    border: 1px solid #E6E9ED;
    /* border-radius: 15px; */
    -webkit-column-break-inside: avoid;
    -moz-column-break-inside: avoid;
    column-break-inside: avoid;
    opacity: 1;
    -moz-transition: all .2s ease;
    -o-transition: all .2s ease;
    -webkit-transition: all .2s ease;
    -ms-transition: all .2s ease;
    transition: all .2s ease;
	    text-align: center;
  }
 
  .trans-panel .btn{
	border-radius: 20px;
  }
  
  .top_nav .navbar-right{
	width: 20%;
  }
  
  .trans-switch-container .form-control{
	    border-radius: 20px;
		padding: 2px 2px 2px 15px;
		font-size: 12px;
		height:auto;
		 background: #2196F3;
    color: white;
    margin-left: -10px;
  }
  
    .trans-switch-container .control-label{
		text-align: left;
	}
	
	.s4hana_text{
	    text-align: center;
    font-size: 24px;
    opacity: .8;
    font-weight: bolder;
	}
  
  </style>
<style>
svg {
	
}

.node {
	cursor: pointer;
}

.node circle {
	fill: #fff;
	stroke: steelblue;
	stroke-width: 1.5px;
}

.node text {
	font: 12px sans-serif;
}

.link {
	fill: none;
	stroke: #ccc;
	stroke-width: 1.5px;
}

.lti_logo{
    width: 64px;
    padding: 13px;
    float: right;
}


.site_digital{
    margin-bottom: -20px;
    margin-left: 20px;
    color: white;
    font-size: 12px;
    margin-top: 12px;
    /* font-weight: bold; */
    font-family: monospace;
}

</style>


  <script src="js/jquery.min.js"></script>

  <!--[if lt IE 9]>
        <script src="../assets/js/ie8-responsive-file-warning.js"></script>
        <![endif]-->

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->

</head>


<body class="nav-md">

  <div class="container body">


    <div class="main_container">

      <div class="col-md-3 left_col">
        <div class="left_col scroll-view">
		
		<div class="navbar nav_title" style="border: 0;">
		<div  class="site_digital" >:Digital:</div>
            <a href="index.html" class="site_title" > <span><b>D i s c <i class="fa fa-bullseye"></i> v e r y</b></span></a>
		
			
          </div>
          <div class="clearfix"></div>

		   <br />
		
		<!-- sidebar menu -->
          <div id="sidebar-menu" class="main_menu_side hidden-print main_menu">
			
				<div class="s4hana_text">
						<span>S/4HANA</span>

			</div>
			<div class="s4hana_text">
						<span>Central Finance</span>

			</div>
		      <div class="menu_section">
              
              <ul class="nav side-menu">
			
				<li class="active"> <a><i class="fa fa-university"></i><b>Central Finance</b><span class="fa fa-chevron-down"></span></a>
                  <ul class="nav child_menu" style="display: block">
                 
                    <li><a href="index.html">Process Discovery</a>
                    </li>
                    <li><a href="data.html">Data Discovery</a>
                    </li>
					<li><a href="org.html">Org Explorer</a>
                    </li>
					
                
                  </ul>
                </li>
               
				
				<li class="active"> <a><i class="fa fa-cubes"></i><b>Data Mapping</b><span class="fa fa-chevron-down"></span></a>
                  <ul class="nav child_menu" style="display: block">
                 
                    <li><a href="#">Master Data</a>
                    </li>
                    <li><a href="#">Transaction Data</a>
                    </li>
					
                
                  </ul>
                </li>
				
				 
				<li class="active"> <a><i class="fa fa-download"></i><b>Downloads</b><span class="fa fa-chevron-down"></span></a>
                  <ul class="nav child_menu" style="display: block">
                     <li><a href="resources/gl.xlsx">G/L Account</a>
                    </li>
					<li><a href="resources/doc_types.xlsx">Document Types</a>
                    </li>
					<li><a href="resources/le_data.xlsx">Legal Entity</a>
                    </li>
					
                    
                    
                
                  </ul>
                </li>
				<!--
				<li class="active"> <a><i class="fa fa-university"></i><b>Org Structure</b><span class="fa fa-chevron-down"></span></a>
                  <ul class="nav child_menu" style="display: block">
                    <li><a href="org.html">Org Explorer</a>
                    </li>
                    <li><a href="legal_entity.html">Legal Entity</a>
                    </li>
                    <li><a href="doc_types.html">Document Types</a>
                    </li>
                
                  </ul>
                </li>
				-->
 
              </ul>
			  
            </div>
		  
			
			
		  </div>
      
          <!-- /menu footer buttons --
          <div class="sidebar-footer hidden-small">
            <a data-toggle="tooltip" data-placement="top" title="Settings">
              <span class="glyphicon glyphicon-cog" aria-hidden="true"></span>
            </a>
            <a data-toggle="tooltip" data-placement="top" title="FullScreen">
              <span class="glyphicon glyphicon-fullscreen" aria-hidden="true"></span>
            </a>
            <a data-toggle="tooltip" data-placement="top" title="Lock">
              <span class="glyphicon glyphicon-eye-close" aria-hidden="true"></span>
            </a>
            <a data-toggle="tooltip" data-placement="top" title="Logout">
              <span class="glyphicon glyphicon-off" aria-hidden="true"></span>
            </a>
          </div>
          <!-- /menu footer buttons -->
        </div>
      </div>

      <!-- top navigation -->
      <div class="top_nav">

        <div class="nav_menu">
          <nav class="" role="navigation">
            <div class="nav toggle">
              <a id="menu_toggle"><i class="fa fa-bars"></i></a>
			 
          
            </div>
			<div class="nav navbar-nav navbar-left">
			              <h3>S/4HANA Central Finance : <b>Data Discovery</b>   </h3>
						  <div class="trans-switch-container">
							 <div class="form-group">
                     
					 
                    </div>
						  
						  </div>
						
			</div>
			 <div class="nav navbar-nav navbar-right ">
				<img class="lti_logo" src="images/lti_logo.png">
            </div>
          </nav>
        </div>

      </div>
      <!-- /top navigation -->

      <!-- page content -->

      <div class="right_col" role="main" style="background-image:url(images/digital.jpg) ;background-repeat:repeat;">
	    <!-- top tiles -->
        <div class="row tile_count">
		<div class="animated flipInY col-md-2 col-sm-4 col-xs-4 tile_stats_count">
			</div>
          <div class="animated flipInY col-md-2 col-sm-4 col-xs-4 tile_stats_count">
            <div class="left"></div>
			<div class="right">
          <i class="fa fa-sticky-note"></i><span class="count_top" id="name0"></span>
              <div class="count">&nbsp;&nbsp;&nbsp;&nbsp;<span id="number0"></span></div>
              <span class="count_bottom" id="description0"></span>
            </div>
           
          </div>
          <div class="animated flipInY col-md-2 col-sm-4 col-xs-4 tile_stats_count">
            <div class="left"></div>
             <div class="right">
                <i class="fa fa-sort-numeric-asc"></i> <span class="count_top" id="name1"></span>
              <div class="count">&nbsp;&nbsp;<span id="number1"></span></div>
              <span class="count_bottom" id="description1"></span>
            </div>
          </div>
          <div class="animated flipInY col-md-2 col-sm-4 col-xs-4 tile_stats_count">
            <div class="left"></div>
            <div class="right">
                <i class="fa fa-clone"></i><span class="count_top" id="name2"></span>
              <div class="count"> &nbsp;&nbsp;<span id="number2"></span></div>
              <span class="count_bottom"><i class="green"> </i>&nbsp;&nbsp;<span id="description2"></span></span>
            </div>
          </div>
		  
          <div class="animated flipInY col-md-2 col-sm-4 col-xs-4 tile_stats_count">
            <div class="left"></div>
            <div class="right">
                <i class="fa fa-university"></i><span class="count_top" id="name3"> </span>
              <div class="count">&nbsp;&nbsp;&nbsp;<span id="number3"></span></div>
              <span class="count_bottom" id="description3"></span>
            </div>
          </div>
		  <div class="animated flipInY col-md-2 col-sm-4 col-xs-4 tile_stats_count">
		  <div class="left"></div>
			</div>
		  <!--
          <div class="animated flipInY col-md-2 col-sm-4 col-xs-4 tile_stats_count">
            <div class="left"></div>
            <div class="right">
              <span class="count_top"><i class="fa fa-cubes"></i> Plants</span>
              <div class="count">2,315</div>
              <span class="count_bottom"><i class="green"><i class="fa fa-sort-asc"></i>34% </i> From last Week</span>
            </div>
          </div>
          <div class="animated flipInY col-md-2 col-sm-4 col-xs-4 tile_stats_count">
            <div class="left"></div>
            <div class="right">
              <span class="count_top"><i class="fa fa-user"></i> Total Users</span>
              <div class="count">2,300</div>
              <span class="count_bottom"><i class="red"><i class="fa fa-thumbs-down"></i> 34% </i> Not Active</span>
            </div>
          </div>
			-->
        </div>
        <!-- /top tiles -->
        <div class="">

		
          <div class="clearfix"></div>
		
		  <div class="row">
		  <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
			<div class="x_panel" id="pProcessWiseView">
				<div class="x_title x_title-no_border">
					<h2>Explore Data across Source Systems</h2>

					<ul class="nav navbar-right panel_toolbox">
						<li id="labelProcessWiseView">
						
							<form method="get" action="resources/coa.xlsx">
						<button type="submit" class="btn btn-success btn-sm" ><i	class="fa fa-magic"> </i> Harmonize Chart of Accounts</button>
						</form>
							<!-- 							<div  class="dropdown btn-round btn-primary btn-sm">This is sample <strong><big>78%</big></strong> butoon</div> -->

						</li>
						<li><a id="panelProcessWiseView"
							class="collapse-link dropdown" role="button"><i
								class="fa fa-chevron-up"></i></a></li>

						<!-- 							<li><a class="close-link"><i class="fa fa-close"></i></a></li> -->
					</ul>
					<div class="clearfix"></div>
					<div class="x_content">
						<!-- <small style="color:red"> (NOT ACTUAL DATA)</small> -->
						<div id="processgraph" style="height: 448px; width: 1056px;margin-left: -10%">
						</div>
					</div>
				</div>
			</div>
		</div>
		
		  </div>
        </div>

        <!-- footer content 
        <footer>
          <div class="copyright-info">
            <p class="pull-right">&copy; LTI<a href="https://colorlib.com"></a>
            </p>
          </div>
          <div class="clearfix"></div>
        </footer>
        <!-- /footer content -->

      </div>
      <!-- /page content -->
    </div>

  </div>

  <div id="custom_notifications" class="custom-notifications dsp_none">
    <ul class="list-unstyled notifications clearfix" data-tabbed_notifications="notif-group">
    </ul>
    <div class="clearfix"></div>
    <div id="notif-group" class="tabbed_notifications"></div>
  </div>

  <script src="js/bootstrap.min.js"></script>

  <!-- bootstrap progress js -->
  <script src="js/progressbar/bootstrap-progressbar.min.js"></script>
  <script src="js/nicescroll/jquery.nicescroll.min.js"></script>
  <!-- icheck -->
  <script src="js/icheck/icheck.min.js"></script>

  <script src="js/custom.js"></script>
  

      <!-- range slider -->
  <script src="js/ion_range/ion.rangeSlider.min.js"></script>
  
  
  <!-- pace -->
  <script src="js/pace/pace.min.js"></script>
  

  
  <script>



$(function() {
   $.getJSON('resources/DataDiscoveryDescription.json', function(data) {
       $.each(data.Information, function(i, info) {
         var Arr = ["<i class='red'><i class='fa fa-thumbs-down'></i> </i>",
                      "<i class='red'><i class='fa fa-thumbs-down'></i> </i>",
                      "",
                      "<i class='red'><i class='fa fa-thumbs-down'></i> </i>"]

         document.getElementById("name"+i).innerHTML=" "+info.Name;   
         document.getElementById("number"+i).innerHTML=" "+info.Value;      
         document.getElementById("description"+i).innerHTML=Arr[i]+info.Description;      
          
     });

   });

});
 
  

	debugger;
	var i = 0,
	duration = 900,
	root;

	var tree=d3.layout.tree()
		.size([450,800]);
	
		var diagonal= d3.svg.diagonal()
				.projection(function(d){return[d.y,d.x] ;});

	var svg = d3.select("#processgraph").append("svg")
                   .attr("width", 1040)
                   .attr("height", 450)
                   
                   .attr("transform", "translate(100,10)")
				   .call(d3.behavior.zoom().on("zoom", function () {
						svg.attr("transform", "translate(" + d3.event.translate + ")" + " scale(" + d3.event.scale + ")")
					  }))
					.append("g");
	
	    // if(this.loc == "spain"){
	    	debugger;
	    	var urlPath = "resources/data.json";
	    	
	    	debugger;
	    	$.ajax({
				url: "resources/data.json",
                //dataType: 'json',
				async:false,
                type: 'get',
                success: function (data) {
                JSON.stringify(data);
				businessgraphvalues = data;
               
                },
                error: function () {
                    alert("error");
                }
				
            });	
	    	


	
d3.json(urlPath, function(error, data) {

  //*************************************************
  // FUNCTION
  //*************************************************
  function genJSON(csvData, groups) {
debugger;
    var genGroups = function(data) {
    	
      return _.map(data, function(element, index) {
    	  var active_flag=false;
    	  active_flag=element.some(function(item){
    		  
    		  if(item.Active=="Y")
    				  {
    			  return "Y";
    			 // break;
    				  }
    		//  d._children ? "Green" : "Green"
    	  })
    	 
        return { name : index, flag:active_flag, children : element };
      });
    };

    var nest = function(node, curIndex) {
      if (curIndex === 0) {
        node.children = genGroups(_.groupBy(csvData, groups[0]));
        _.each(node.children, function (child) {
          nest(child, curIndex + 1);
        });
      }
      else {
        if (curIndex < groups.length) {
          node.children = genGroups(
            _.groupBy(node.children, groups[curIndex])
          );
          _.each(node.children, function (child) {
            nest(child, curIndex + 1);
          });
        }
      }
      return node;
    };
	
	
	
    return nest({}, 0);
  }

  //*************************************************
  // CALL FUNCTION WITH ARRAY OF GROUPS
  //*************************************************
  var preppedData = genJSON(data,['Level 0', 'Level 1', 'Level 2', 'Level 3', 'Level 4']);

   root = preppedData;
   
	mydata = businessgraphvalues;
	others = [];
	/*
	for (var i=0; i<mydata.length; i++)
		{
			if(mydata[i]['Active']=='Y')
			{
			a = others.indexOf(mydata[i]['Level 0']);
			if(a==-1)
			others.push(mydata[i]['Level 0'])
				
			a = others.indexOf(mydata[i]['Level 1']);
			if(a==-1)
			others.push(mydata[i]['Level 1'])
			
			a = others.indexOf(mydata[i]['Level 2']);
			if(a==-1)
			others.push(mydata[i]['Level 2'])
			
			a = others.indexOf(mydata[i]['Level 3']);
			if(a==-1)
			others.push(mydata[i]['Level 3'])
			
			a = others.indexOf(mydata[i]['Level 4']);
			if(a==-1)
			others.push(mydata[i]['Level 4'])
			
			a = others.indexOf(mydata[i]['Level 5']);
			if(a==-1)
			others.push(mydata[i]['Level 5'])
			
			
			}
		}
 
 */
                  root.x0 = 0 ;//800 / 4;
                   root.y0 = 0;//100/4;
                   
                   function collapse(d) {
                   if (d.children) {
                   d._children = d.children;
				  
                   d._children.forEach(collapse);
                   d.children = null;
                   }
                   }
                   
                   root.children.forEach(collapse);
                   update(root);
		

		function click(d) {
                   if (d.children) {
                   d._children = d.children;
                   d.children = null;
                   } else {
                   d.children = d._children;
                   d._children = null;
                   }
                   update(d);
                   }
        
		
		
		 function update(source) {

	           var nodes = tree.nodes(root).reverse(),
                   links = tree.links(nodes);

		   var node = svg.selectAll("g.node")
                   .data(nodes, function(d) { return d.id || (d.id = ++i); });

		 var nodeEnter = node.enter().append("g")
                   .attr("class", "node")
                   .attr("transform", function(d) { return "translate(" + source.y0 + "," + source.x0 + ")"; })
                   .on("click", click);

		   nodeEnter.append("circle")
                    .attr("r",4.5)
                   .style("fill", function(d) { return d._children ? "lightsteelblue" : "#fff"; });
                  
                   nodeEnter.append("text")
                   .attr("x", function(d) { return d.children || d._children ? -6 : 11; })
                   .attr("dy", "-0.7em")
                   .attr("text-anchor", function(d) { return d.children || d._children ? "end" : "start"; })
                   .text(function(d) { return d.name; })
                   .style("fill-opacity", 1e-6);
				   
				    nodeEnter.append("text")
                   .attr("x", function(d) { return d.children || d._children ? -6 : 11; })
                   .attr("dy", "-1.2em")
                   .attr("text-anchor", function(d) { return d.children || d._children ? "end" : "start"; })
                   .text(function(d) { return "Parameters"; })
                   .style("fill-opacity", 1e-6);

		 var nodeUpdate = node.transition()
                  .duration(duration)
                  .attr("transform", function(d) { return "translate(" + d.y + "," + d.x + ")"; });
                   
                   // nodeUpdate.select("circle")
                   //.attr("r",4.5)
				   
                  // .style("fill", function(d) { return d._children ? "lightsteelblue" : "#fff"; });
                   
                   nodeUpdate.select("text")
                   .style("fill-opacity", 1);
				   
				   
				   
			//	   functionality for active nodes
			
			
               
                nodeUpdate.select("circle")
               .attr("r",function (d){
            	   debugger;
			  // a = others.indexOf(d.name);

						//if(a!=-1)
							if(d.flag)
							{
								debugger;
								return 7.5
							}
						else
							{
								return 4.5
							}
											})
			   
               .style("fill", function(d) {

					  //  a = others.indexOf(d.name);
						if(d.flag)
							{
								debugger;
								return d._children ? "#2abd21" : "#2abd21";
							}
						else
							{
								return d._children ? "lightsteelblue" : "#fff"; 
							} 
				}); 
               
				

			
			   
			//	   end of functionality for active nodes
				   

		   var nodeExit = node.exit().transition()
                   .duration(duration)
                   .attr("transform", function(d) { return "translate(" + source.y + "," + source.x + ")"; })
                   .remove();
                   
                   nodeExit.select("circle")
                   .attr("r", 1e-6);
                   
                   nodeExit.select("text")
                   .style("fill-opacity", 1e-6);

			 var link = svg.selectAll("path.link")
                   .data(links, function(d) { return d.target.id; });

		link.enter().insert("path", "g")
                   .attr("class", "link")
                   .attr("d", function(d) {
                   var o = {x: source.x0, y: source.y0};
                   return diagonal({source: o, target: o});
                   });

		link.transition()
                  .duration(duration)
                   .attr("d", diagonal);

               link.exit().transition()
                   .duration(duration)
                   .attr("d", function(d) {
                   var o = {x: source.x, y: source.y};
                   return diagonal({source: o, target: o});
  })
                .remove();
                  nodes.forEach(function(d) {
                  d.x0 = d.x;
                   d.y0 = d.y;
                   });
  }
  

});
	
	
	</script>

